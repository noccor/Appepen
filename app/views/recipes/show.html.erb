<div class="jumbotron">
  <h1><%= link_to "Â«", meal_path(@recipe.meal_id) %> <%= @recipe.name %></h1>
  <i>The recipe for <%= @recipe.meal.name %></i>
  <div class="btn-group pull-right" role="group" aria-label="Basic example">
    <%= link_to edit_recipe_path(@recipe.id), method: :get, class: "btn btn-primary btn-lg" do %>
      <span class="glyphicon glyphicon-edit"></span>  Modify
    <% end %>
    <%= link_to recipe_path(@recipe.id), method: :delete, class: "btn btn-danger btn-lg" do %>
     <span class="glyphicon glyphicon-trash"></span> Delete Meal</a>
   <% end %>
   <% if @recipe.recipe_ingredients.count == 0 %>
     <div class="btn-group pull-right" role="group" width="100%" aria-label="Basic example">
       <%= link_to new_recipe_ingredient_path(@recipe.id), method: :get, class: "btn btn-success btn-lg" do %>
         <span class="glyphicon glyphicon-pencil"></span> Add Ingredient</a>
       <% end %>
     </div>
   <% end %>
  </div>
  <%= @recipe.description %>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    Add Ingredient
  </div>
  <div class="panel-body">
    <%= form_for @recipe_ingredient do |f| %>
        <table style="width: 100%">
          <thead>
            <th>Ingredient</th>
            <th>Amount</th>
            <th>Measure</th>
            <th>Allergens</th>
            <th>Optional</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <select id="ingredient_id" name="recipe_ingredient[ingredient_id]" style="width: 100%"></select><br />
              </td>
              <td>
                <%= f.number_field :quantity %>
              </td>
              <td>
                <select id="measure" name="recipe_ingredient[measure]">
                  <option value="g">grams</option>
                  <option value="mg">miligrams</option>
                  <option value="l">litres</option>
                  <option value="ml">mililitres</option>
                </select>
              </td>
              <td>
                <div class="dropdown">
                  <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-grain"></span>
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li>
                      <input type="checkbox" name="recipe_ingredient[celery]" class="custom-control-input">Celery
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[cereal]" class="custom-control-input">Cereal
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[crustacean]" class="custom-control-input">Crustacean
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[egg]" class="custom-control-input">Egg
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[fish]" class="custom-control-input">Fish
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[lupin]" class="custom-control-input">Lupin
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[milk]" class="custom-control-input">Milk
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[mollusc]" class="custom-control-input">Mollusc
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[mustard]" class="custom-control-input">Mustard
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[nut]" class="custom-control-input">Nut
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[peanut]" class="custom-control-input">Peanut
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[sesame]" class="custom-control-input">Sesame
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[soya]" class="custom-control-input">Soya
                    </li>
                    <li>
                      <input type="checkbox" name="recipe_ingredient[sulphites]" class="custom-control-input">Sulphites
                    </li>
                  </ul>
                </div>
              </td>
              <td>
                <label class="custom-control custom-checkbox">
                  <input type="checkbox" name="recipe_ingredient[optional]" class="custom-control-input">
                  <span class="custom-control-indicator"></span>
                  <span class="custom-control-description"></span>
                </label>
                <%= f.hidden_field :recipe_id, :value => params[:id] %>
              </td>
            </tr>
          </tbody>
        </table>
      <%= f.submit %>
    <% end %>
  </div>
</div>

<% if @recipe.recipe_ingredients.count != 0 %>
    <div class="panel-group" id="accordion">
        <div class="panel-group">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                  <b>Ingredients</b></span>
                </td>
                </a>
              </h4>
            </div>
            <div id="collapse1" class="panel-collapse collapse">
              <div class="panel-body">
                <table class="table">
                  <thead>
                    <td>Name</td>
                    <td>Description</td>
                    <td></td>
                  </thead>
                  <% @recipe.recipe_ingredients.each do |ingredient| %>
                    <tr>
                      <td><%= ingredient.ingredient.name %></td>
                      <td><%= ingredient.ingredient.description %></td>
                      <td>
                      </td>
                    </tr>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
<% end %>
